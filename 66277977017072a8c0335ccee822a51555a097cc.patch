From 66277977017072a8c0335ccee822a51555a097cc Mon Sep 17 00:00:00 2001
From: TangoCash <eric@loxat.de>
Date: Thu, 12 Oct 2017 22:07:23 +0200
Subject: [PATCH] add UHD icon in channellist

---
 src/gui/channellist.cpp           | 4 +++-
 src/zapit/include/zapit/channel.h | 1 +
 src/zapit/src/channel.cpp         | 7 +++++++
 3 files changed, 11 insertions(+), 1 deletion(-)

diff --git a/src/gui/channellist.cpp b/src/gui/channellist.cpp
index 8c3a840a2..49c9b6203 100644
--- a/src/gui/channellist.cpp
+++ b/src/gui/channellist.cpp
@@ -1950,10 +1950,12 @@ void CChannelList::paintItem(int pos, const bool firstpaint)
 		if ((*chanlist)[curr]->getChannelID() == CZapit::getInstance()->GetPipChannelID())
 			pip_icon = NEUTRINO_ICON_PIP;
 #endif
-		//set HD icon
+		//set HD/UHD icon
 		const char *hd_icon = NULL;
 		if(chan->isHD() && g_settings.channellist_hdicon)
 			hd_icon = NEUTRINO_ICON_RESOLUTION_HD;
+		if(chan->isUHD() && g_settings.channellist_hdicon)
+			hd_icon = NEUTRINO_ICON_RESOLUTION_UHD;
 
 		//set webtv icon
 		const char *webtv_icon = NULL;
diff --git a/src/zapit/include/zapit/channel.h b/src/zapit/include/zapit/channel.h
index a9c7e38d5..bd0973ec4 100644
--- a/src/zapit/include/zapit/channel.h
+++ b/src/zapit/include/zapit/channel.h
@@ -219,6 +219,7 @@ class CZapitChannel
 		t_original_network_id	getOriginalNetworkId(void) 	const { return original_network_id; }
 		std::string		getScriptName(void)		const { return script; }
 		unsigned char        	getServiceType(bool real=false);
+		bool			isUHD();
 		bool			isHD();
 		t_channel_id         	getChannelID(void)         	const { return channel_id; }
 		transponder_id_t        getTransponderId(void)          const { return CREATE_TRANSPONDER_ID64(freq, satellitePosition,original_network_id,transport_stream_id); }
diff --git a/src/zapit/src/channel.cpp b/src/zapit/src/channel.cpp
index 2c5f28157..4180004e9 100644
--- a/src/zapit/src/channel.cpp
+++ b/src/zapit/src/channel.cpp
@@ -197,6 +197,13 @@ unsigned char CZapitChannel::getServiceType(bool real)
 			ST_DIGITAL_RADIO_SOUND_SERVICE : ST_DIGITAL_TELEVISION_SERVICE;	
 }
 
+bool CZapitChannel::isUHD()
+{
+	if (serviceType == 0x1f)
+		return true;
+	return false;
+}
+
 bool CZapitChannel::isHD()
 {
 	switch(serviceType) {
